<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns â€“ ImageMagick operation not authorized</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.com/tech/rss.xml" />
</head>

<body>

<div class="contentbox">
<div class="header">
    <a href=".." class="header">Code Yarns â€ğŸ‘¨â€ğŸ’»</a>
</div>
<div class="header">
    <a class="header2" href="https://codeyarns.com/tech/">Tech Blog</a> â– <a class="header2" href="https://codeyarns.com/personal/">Personal Blog</a>
</div>
</div>

<br />

<div class="contentbox">
<header>
<h1 class="title">ImageMagick operation not authorized</h1>
<p class="date">ğŸ“… 2020-Jun-20 â¬© âœï¸ Ashwin Nanjappa â¬© ğŸ·ï¸ <a href='index.html#imagemagick'>imagemagick</a> â¬© ğŸ“š <a href="index.html">Archive</a></p>
</header>
<h2 id="problem">Problem</h2>
<p>I tried to convert a few PNG files to a PDF file using the
<strong>convert</strong> tool that ships with
<strong>ImageMagick</strong> as described <a
href="2009-12-29-imagemagick-convert-images-to-pdf-document.html">here</a>.</p>
<p>With ImageMagick 6.9.7, I got this error message:</p>
<pre><code>$ convert *.png out.pdf
convert-im6.q16: not authorized `out.pdf&#39; @ error/constitute.c/WriteImage/1037.</code></pre>
<p>With ImageMagick 6.9.10, I got this error message:</p>
<pre><code>$ convert *.png out.pdf
convert-im6.q16: attempt to perform an operation not allowed by the security policy `PDF&#39; @ error/constitute.c/IsCoderAuthorized/408.</code></pre>
<h2 id="solution">Solution</h2>
<p>Since ImageMagick is sometimes used on web servers to operate on
images for users, it has security checks on certain operations. The
above error was caused since my operation failed one of its
policies.</p>
<p>Since I am doing these operations locally, I do not really want
ImageMagick imposing security policies. So I moved its policy file so
that it is not used:</p>
<pre><code>$ sudo mv /etc/ImageMagick-6/policy.xml /etc/ImageMagick-6/policy.xml.orig</code></pre>
<p>My conversion worked after this change.</p>
</div>

<br />

<div class="contentbox">

<div style="text-align: center">
Â© 2026 Ashwin Nanjappa
â€¢
All writing under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a> license
â€¢
<a href="https://mastodon.social/@codeyarns">ğŸ˜ Mastodon</a>
â€¢
<a href="https://bsky.app/profile/codeyarns.bsky.social">ğŸ¦‹ Bluesky</a>
â€¢
<a href="mailto:codeyarns@gmail.com">ğŸ“§ Email</a>
</div>
</div>

</body>
</html>
