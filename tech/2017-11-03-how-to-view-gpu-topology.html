<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns ‚Äì How to view GPU topology</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.github.io/tech/rss.xml" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-1956250892185343" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
  </script>
  <!-- Twitter button -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>

<body>

<div class="contentbox">
<table style="width: 100%;">
    <tr>
        <td style="text-align: left;">
            <a href=".." class="header">Code Yarns ‚Äçüë®‚Äçüíª</a>
        </td>
        <td style="text-align: right;">
            <div class="header2"><a class="header2" href="https://codeyarns.github.io/tech/">Tech Blog</a> ‚ùñ <a class="header2" href="https://codeyarns.github.io/personal/">Personal Blog</a></div>
            </br>
            <iframe src="https://duckduckgo.com/search.html?site=codeyarns.github.io&kp=-2&kc=1&prefill=Search this website" style="overflow:hidden;margin:0;padding:0;width:300px;height:40px;" frameborder="0"></iframe>
        </td>
    </tr>
</table>
</div>

<br />

<div class="contentbox">
<header>
<h1 class="title">How to view GPU topology</h1>
<p class="date">üìÖ 2017-Nov-03 ‚¨© üìö <a href="index.html">Archive</a></p>
</header>
<p>The <strong>NVIDIA System Management Interface</strong> tool is the easiest way to explore the GPU topology on your system. This tool is available as <strong>nvidia-smi</strong> and is installed as part of the NVIDIA display driver. GPU topology describes how one or more GPUs in the system are connected to each other and to the CPU and other devices in the system. The topology is important to know how data is copied between GPUs or between a GPU and CPU or other device.</p>
<ul>
<li>To view the available commands related to GPU topology:</li>
</ul>
<pre><code>$ nvidia-smi topo -h</code></pre>
<ul>
<li>To view the connection matrix between the GPUs and the CPUs they are close to (CPU affinities):</li>
</ul>
<pre><code>$ nvidia-smi topo -m</code></pre>
<p>The output of this command shows a matrix of the connections between your GPUs with interconnect info, CPU affinity and NUMA affinity.</p>
<p>Some examples of GPU topologies:</p>
<pre><code>$ nvidia-smi topo -m
    GPU0    CPU Affinity
GPU0     X  0-7

$ nvidia-smi topo -m
    GPU0    GPU1    GPU2    GPU3    CPU Affinity
GPU0     X  PHB SOC SOC 0-9,20-29
GPU1    PHB  X  SOC SOC 0-9,20-29
GPU2    SOC SOC  X  PHB 10-19,30-39
GPU3    SOC SOC PHB  X  10-19,30-39

$ nvidia-smi topo -m
        GPU0    GPU1    GPU2    GPU3    GPU4    GPU5    GPU6    GPU7    mlx5_0  mlx5_2  mlx5_1  mlx5_3  CPU Affinity
GPU0     X      NV1     NV1     NV2     NV2     SOC     SOC     SOC     PIX     SOC     PHB     SOC     0-19,40-59
GPU1    NV1      X      NV2     NV1     SOC     NV2     SOC     SOC     PIX     SOC     PHB     SOC     0-19,40-59
GPU2    NV1     NV2      X      NV2     SOC     SOC     NV1     SOC     PHB     SOC     PIX     SOC     0-19,40-59
GPU3    NV2     NV1     NV2      X      SOC     SOC     SOC     NV1     PHB     SOC     PIX     SOC     0-19,40-59
GPU4    NV2     SOC     SOC     SOC      X      NV1     NV1     NV2     SOC     PIX     SOC     PHB     20-39,60-79
GPU5    SOC     NV2     SOC     SOC     NV1      X      NV2     NV1     SOC     PIX     SOC     PHB     20-39,60-79
GPU6    SOC     SOC     NV1     SOC     NV1     NV2      X      NV2     SOC     PHB     SOC     PIX     20-39,60-79
GPU7    SOC     SOC     SOC     NV1     NV2     NV1     NV2      X      SOC     PHB     SOC     PIX     20-39,60-79
mlx5_0  PIX     PIX     PHB     PHB     SOC     SOC     SOC     SOC      X      SOC     PHB     SOC
mlx5_2  SOC     SOC     SOC     SOC     PIX     PIX     PHB     PHB     SOC      X      SOC     PHB
mlx5_1  PHB     PHB     PIX     PIX     SOC     SOC     SOC     SOC     PHB     SOC      X      SOC
mlx5_3  SOC     SOC     SOC     SOC     PHB     PHB     PIX     PIX     SOC     PHB     SOC      X </code></pre>
<p>The command also prints this legend as reference:</p>
<pre><code>Legend:
  X    = Self
  SYS  = Connection traversing PCIe as well as the SMP interconnect between NUMA nodes (e.g., QPI/UPI)
  NODE = Connection traversing PCIe as well as the interconnect between PCIe Host Bridges within a NUMA node
  PHB  = Connection traversing PCIe as well as a PCIe Host Bridge (typically the CPU)
  PXB  = Connection traversing multiple PCIe bridges (without traversing the PCIe Host Bridge)
  PIX  = Connection traversing at most a single PCIe bridge
  NV#  = Connection traversing a bonded set of # NVLinks</code></pre>
</div>

<br />

<div class="contentbox">

<div class="footer"><a href="mailto:codeyarns@gmail.com" style="text-decoration: none; font-size: xx-large;">üìß</a> <a href="https://twitter.com/codeyarns" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @codeyarns</a> <a href="https://www.buymeacoffee.com/codeyarns"><img src="https://cdn.buymeacoffee.com/buttons/default-orange.png" alt="Buy Me A Coffee" style="height: 38px !important;width: 163px !important;" ></a></div>
</div>

</body>
</html>
