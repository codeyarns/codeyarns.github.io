<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns ‚Äì How to install CUDA 5.0 on Ubuntu 12.04 LTS</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.github.io/tech/rss.xml" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-1956250892185343" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
  </script>
  <!-- Twitter button -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>

<body>

<div class="contentbox">
<div class="header">
    <a href=".." class="header">Code Yarns ‚Äçüë®‚Äçüíª</a>
  </div>
  <div class="header">
    <a class="header2" href="https://codeyarns.github.io/tech/">Tech Blog</a> ‚ùñ <a class="header2" href="https://codeyarns.github.io/personal/">Personal Blog</a>
  </div>
  <div class="header" style="padding-top: 10px;">
    <iframe src="https://duckduckgo.com/search.html?site=codeyarns.github.io&kp=-2&kc=1&prefill=Search this website" style="width:300px;height:40px;" frameborder="0"></iframe>
</div>
</div>

<br />

<div class="contentbox">
<header>
<h1 class="title">How to install CUDA 5.0 on Ubuntu 12.04 LTS</h1>
<p class="date">üìÖ 2013-Mar-06 ‚¨© ‚úçÔ∏è Ashwin Nanjappa ‚¨© üìö <a href="index.html">Archive</a></p>
</header>
<p>These steps helped me to successfully install¬†<strong>CUDA 5.0</strong> on many <strong>Ubuntu 12.04 LTS</strong> computers, including headless servers that do not run X windows.</p>
<ol type="1">
<li><p>Make sure the computer has a NVIDIA <strong>graphics card</strong> that is recognized by Linux. This can be done as shown <a href="2013/01/25/how-to-find-which-nvidia-graphics-card-is-in-your-ubuntu-system/">here</a>.</p></li>
<li><p><strong>Uninstall</strong> all NVIDIA <strong>drivers</strong> and kernel modules. Steps to do this are described <a href="2013/02/07/how-to-fix-nvidia-driver-failure-on-ubuntu/">here</a>.</p></li>
<li><p>Download <strong><a href="https://developer.nvidia.com/cuda-downloads">CUDA 5.0 installer for Linux</a></strong>. There is no installer for Ubuntu 12.04 LTS, so download the installer for Ubuntu 11.10 instead.</p></li>
<li><p>Make the installer executable and run it as sudo. When asked to install the NVIDIA driver, choose Yes. This is important, allow the installer to install its own drivers. Let it install CUDA to the default location: <code>/usr/local/cuda-5.0/</code></p></li>
<li><p>If the computer is a headless Ubuntu server which is not connected to a display or does not run X, then device files for your card are not created by default. So, create a shell script file (say <code>/home/joe/NvidiaDevCreator.sh</code>) with the following code:</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/bash</span>

<span class="ex">/sbin/modprobe</span> nvidia

<span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$?</span><span class="st">&quot;</span> <span class="ot">-eq</span> 0<span class="bu"> ]</span>; <span class="kw">then</span>
  <span class="co"># Count the number of NVIDIA controllers found.</span>
  <span class="va">NVDEVS=</span><span class="kw">`</span><span class="ex">lspci</span> <span class="kw">|</span> <span class="fu">grep</span> -i NVIDIA<span class="kw">`</span>
  <span class="va">N3D=</span><span class="kw">`</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$NVDEVS</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;3D controller&quot;</span> <span class="kw">|</span> <span class="fu">wc</span> -l<span class="kw">`</span>
  <span class="va">NVGA=</span><span class="kw">`</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$NVDEVS</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;VGA compatible controller&quot;</span> <span class="kw">|</span> <span class="fu">wc</span> -l<span class="kw">`</span>

  <span class="va">N=</span><span class="kw">`</span><span class="fu">expr</span> <span class="va">$N3D</span> + <span class="va">$NVGA</span> - 1<span class="kw">`</span>
  <span class="kw">for</span> <span class="ex">i</span> in <span class="kw">`</span><span class="fu">seq</span> 0 <span class="va">$N</span><span class="kw">`;</span> <span class="kw">do</span>
    <span class="fu">mknod</span> -m 666 /dev/nvidia<span class="va">$i</span> c 195 <span class="va">$i</span>
  <span class="kw">done</span>

  <span class="fu">mknod</span> -m 666 /dev/nvidiactl c 195 255

<span class="kw">else</span>
  <span class="bu">exit</span> 1
<span class="kw">fi</span></code></pre></div>
<p>Add the line <code>/home/joe/NvidiaDevCreator.sh</code> to <code>/etc/rc.local</code> and restart the system. This ensures that the necessary dev files are created on every startup for access by CUDA programs.</p>
<ol type="1">
<li>Add the following to your bashrc:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">export</span> <span class="va">CUDA_ROOT=</span>/usr/local/cuda-5.0
<span class="bu">export</span> <span class="va">PATH=$PATH</span>:<span class="va">$CUDA_ROOT</span>/bin
<span class="bu">export</span> <span class="va">LD_LIBRARY_PATH=$LD_LIBRARY_PATH</span>:<span class="va">$CUDA_ROOT</span>/lib64</code></pre></div>
<p>This ensures that the CUDA libraries are available for dynamic loading by CUDA programs.</p>
<p>That is all! Any user on your Ubuntu 12.04 system should now be able to compile and run CUDA 5.0 programs without any special access permissions or privileges üòä</p>
<p><strong>Note</strong>: I had problems when I used the nvidia-current and nvidia-current-updates drivers from Ubuntu. Only by uninstalling them and using the drivers that ship with the CUDA installer was I able to get CUDA working.</p>
<p><strong>Tried with:</strong> NVIDIA GeForce 9900 GT and NVIDIA GTX 690</p>
</div>

<br />

<div class="contentbox">

<div class="footer"><a href="mailto:codeyarns@gmail.com" style="text-decoration: none; font-size: xx-large;">üìß</a> <a href="https://twitter.com/codeyarns" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @codeyarns</a> <a href="https://www.buymeacoffee.com/codeyarns"><img src="https://cdn.buymeacoffee.com/buttons/default-orange.png" alt="Buy Me A Coffee" style="height: 38px !important;width: 163px !important;" ></a></div>
</div>

</body>
</html>
