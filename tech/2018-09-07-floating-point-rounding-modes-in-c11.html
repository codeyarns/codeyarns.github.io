<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Ashwin Nanjappa" />
  <title>Floating point rounding modes in C++11</title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<div id="header">
<h1 class="title">Floating point rounding modes in C++11</h1>
<h2 class="author">Ashwin Nanjappa</h2>
<h3 class="date">2018-09-07 06:36:27+00:00</h3>
</div>
<p>The standard C library has 4 floating point <a href="http://www.gnu.org/software/libc/manual/html_node/Rounding.html">rounding modes</a> available through <code>cfenv.h</code>. These are now available in C++11 through the header file <code>cfenv</code>.</p>
<ul>
<li>The 4 floating point rounding modes are:</li>
</ul>
<pre><code>FE_TONEAREST
FE_DOWNWARD
FE_UPWARD
FE_TOWARDZERO</code></pre>
<ul>
<li><p><code>FE_TONEAREST</code> rounds to the nearest integer. If the floating point value is exactly midway between two integers, then it does <a href="https://en.wikipedia.org/wiki/Rounding#Round_half_to_even">round half to even</a>. The rest of the rounding modes are self explanatory.</p></li>
<li><p>None of the 4 rounding modes is equivalent to the <a href="https://en.wikipedia.org/wiki/Rounding#Round_half_away_from_zero">round half away from zero</a> which the <code>round</code> method does.</p></li>
<li><p>Anything to do with floating point operations is dependent on the FPU of the processor. So, the availability of these rounding modes and their values are highly dependent on the FPU of your processor.</p></li>
<li><p>On my x86_64 computer, all the 4 rounding modes were available and the values of these rounding modes were found to be:</p></li>
</ul>
<pre><code>#define FE_TONEAREST 0x000
#define FE_DOWNWARD 0x400
#define FE_UPWARD 0x800
#define FE_TOWARDZERO 0xC00</code></pre>
<ul>
<li><p>The FPU of your processor may support many other rounding modes in addition to these 4 modes.</p></li>
<li><p>On my x86_64 computer, I found that <code>FE_TONEAREST</code> was the <strong>default rounding mode</strong> when I used methods like <code>rint</code> and <code>nearbyint</code> to perform rounding.</p></li>
</ul>
</body>
</html>
