<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns â€“ How to use argparse</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.github.io/tech/rss.xml" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-6045459060677327" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
  </script>
</head>
<body>
<table style="width: 100%;">
    <tr>
        <td>
            <a href=".." class="header">Code Yarns &#128187;</a>
        </td>
        <td style="text-align: right;">
            <iframe src="https://duckduckgo.com/search.html?site=codeyarns.github.io&kp=-2&kc=1&prefill=Search this website" style="overflow:hidden;margin:0;padding:0;width:300px;height:40px;" frameborder="0"></iframe>
        </td>
    </tr>
</table>
<hr />
<header>
<h1 class="title">How to use argparse</h1>
<p class="date">(First posted on: 2013-02-20 14:07:41+00:00)</p>
</header>
<p>The <strong>argparse</strong> module makes it really easy to read, parse and use the input arguments passed to a <strong>Python</strong> program.</p>
<p>Usage is in 3 simple steps:</p>
<ul>
<li><p>Create an object of <code>ArgumentParser</code></p></li>
<li><p>Add the arguments you want to parse one by one using <code>add_argument</code></p></li>
<li><p>Parse the inputs and extract the arguments using <code>parse_args</code>. The arguments are returned in an object with the values available using the object members.</p></li>
</ul>
<p>Here is a simple program that illustrates usage of argparse with different types of input arguments:</p>
<pre><code>import argparse
import sys

def foo(args):
    print args

    print &quot;Radius:   &quot;, args.rad
    print &quot;Distance: &quot;, args.d
    print &quot;Name:     &quot;, args.name
    print &quot;Recompute:&quot;, args.recompute
    print &quot;In files: &quot;, args.in_files

def main():

    # Create parser
    arg_parser = argparse.ArgumentParser(description=&quot;This program achieves nothing!&quot;)

    # Add arguments you want to handle
    modes = [&quot;release&quot;, &quot;debug&quot;]
    arg_parser.add_argument(&quot;--radius&quot;,    type=float,          default=1.2,   help=&quot;Radius of the component&quot;)
    arg_parser.add_argument(&quot;-d&quot;,          type=int,            default=9,     help=&quot;Distance to the component&quot;)
    arg_parser.add_argument(&quot;--name&quot;,      type=str,                           help=&quot;Name of component&quot;)
    arg_parser.add_argument(&quot;--mode&quot;,      type=str,            choices=modes, help=&quot;Mode to use. Should be either release or debug&quot;)
    arg_parser.add_argument(&quot;--recompute&quot;, action=&quot;store_true&quot;, default=False, help=&quot;Indicate if recomputation is needed&quot;)
    arg_parser.add_argument(&quot;--in_files&quot;,  type=str,            nargs=&quot;+&quot;,     help=&quot;One or more input file paths&quot;)

    if len(sys.argv) == 1:
        arg_parser.print_help()
        sys.exit(1)

    # Parse sys.argv using parser
    args = arg_parser.parse_args()

    # Pass arguments around
    foo(args)

if __name__ == &quot;__main__&quot;:
    main()</code></pre>
<h2 id="argumentparser">ArgumentParser</h2>
<p>This call has many useful options, the only one I actually use is:</p>
<ul>
<li><code>description</code>: Specify what you want to be displayed about this program when it is invoked using <code>--help</code>.</li>
</ul>
<h2 id="add_argument">add_argument</h2>
<p>This call has many useful options. Many of them are needed in most scripts:</p>
<ul>
<li><p>The first input is the option name. If the option is named without a single or double dash, as say <code>radius</code>, then it becomes a positional argument. So, you cannot invoke its option name, but can directly pass its value. For example: <code>./main.py 3.14</code></p></li>
<li><p>An option can be specified with a single <code>-r</code> or double dash <code>--radius</code>. You can access the value of this option later in the argument object using <code>r</code> or <code>radius</code> member respectively.</p></li>
<li><p>An option can be specified with both single and double dashes, just separate both the quoted strings by a comma. Note that you can only access the value later using the name provided to the double dash option <code>radius</code>.</p></li>
<li><p>Input argument to a named option can be separated by a space <code>--radius 13</code> or using the equals symbol <code>--radius=13</code>.</p></li>
<li><p><strong>action</strong> parameter: There are many strings that can be passed to this parameter indicating what to do when the option is invoked. The most typical usage is to set a True or False value for a boolean using <code>store_true</code> or <code>store_false</code> respectively.</p></li>
<li><p><strong>default</strong> parameter: Specify the default value to be set if you do not provide a value for this option at the shell.</p></li>
<li><p><strong>type</strong> parameter: Specify what type the input value should be interpreted as. If you do not specify this, then it will be stored as a string. An error will be thrown if the input you provide cannot be converted to this type.</p></li>
<li><p><strong>required</strong> parameter: Set this to True if providing a value to this parameter is mandatory. An error is thrown at runtime if the value is not provided by user.</p></li>
<li><p><strong>help</strong> parameter: Set the string to shown as documentation when the program is invoked with <code>--help</code>.</p></li>
<li><p><strong>dest</strong> parameter: Specify the member name to be used to store the value passed to this option. By default it has the same name as the option name. If the option name had dashes, they are converted to underscores to create a valid member name.</p></li>
<li><p>When the program is invoked with <code>-h</code> or <code>--help</code>, it will list the input options available and the documentation you have provided for each option.</p></li>
</ul>
<p><strong>Tried with:</strong> Python 3.5 and Ubuntu 16.04</p>
<hr />
<p><a href="rss.xml">RSS</a> - <a href="mailto:codeyarns@gmail.com">Contact</a></p>
</body>
</html>
