<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns ‚Äì How to use argparse</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.github.io/tech/rss.xml" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-6045459060677327" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
  </script>
  <!-- Twitter button -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>
<body>
<table style="width: 100%;">
    <tr>
        <td style="text-align: left;">
            <a href=".." class="header">Code Yarns ‚Äçüë®‚Äçüíª</a>
        </td>
        <td style="text-align: right;">
            <div class="header2"><a class="header2" href="https://codeyarns.github.io/tech/">Tech Blog</a> ‚ùñ <a class="header2" href="https://codeyarns.github.io/personal/">Personal Blog</a></div>
            </br>
            <iframe src="https://duckduckgo.com/search.html?site=codeyarns.github.io&kp=-2&kc=1&prefill=Search this website" style="overflow:hidden;margin:0;padding:0;width:300px;height:40px;" frameborder="0"></iframe>
        </td>
    </tr>
</table>
<hr />
<header>
<h1 class="title">How to use argparse</h1>
<p class="date">(First posted on: 2013-02-20 14:07:41+00:00)</p>
</header>
<p>The <strong>argparse</strong> module makes it really easy to read, parse and use the input arguments passed to a <strong>Python</strong> program.</p>
<p>Usage is in 3 simple steps:</p>
<ul>
<li><p>Create an object of <code>ArgumentParser</code></p></li>
<li><p>Add the arguments you want to parse one by one using <code>add_argument</code></p></li>
<li><p>Parse the inputs and extract the arguments using <code>parse_args</code>. The arguments are returned in an object with the values available using the object members.</p></li>
</ul>
<p>Here is a simple program that illustrates usage of argparse with different types of input arguments:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="im">import</span> argparse</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="im">import</span> sys</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">def</span> foo(args):</a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="bu">print</span> args</a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="bu">print</span> <span class="st">&quot;Radius:   &quot;</span>, args.rad</a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="bu">print</span> <span class="st">&quot;Distance: &quot;</span>, args.d</a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="bu">print</span> <span class="st">&quot;Name:     &quot;</span>, args.name</a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="bu">print</span> <span class="st">&quot;Recompute:&quot;</span>, args.recompute</a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="bu">print</span> <span class="st">&quot;In files: &quot;</span>, args.in_files</a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="kw">def</span> main():</a>
<a class="sourceLine" id="cb1-14" title="14"></a>
<a class="sourceLine" id="cb1-15" title="15">    <span class="co"># Create parser</span></a>
<a class="sourceLine" id="cb1-16" title="16">    arg_parser <span class="op">=</span> argparse.ArgumentParser(description<span class="op">=</span><span class="st">&quot;This program achieves nothing!&quot;</span>)</a>
<a class="sourceLine" id="cb1-17" title="17"></a>
<a class="sourceLine" id="cb1-18" title="18">    <span class="co"># Add arguments you want to handle</span></a>
<a class="sourceLine" id="cb1-19" title="19">    modes <span class="op">=</span> [<span class="st">&quot;release&quot;</span>, <span class="st">&quot;debug&quot;</span>]</a>
<a class="sourceLine" id="cb1-20" title="20">    arg_parser.add_argument(<span class="st">&quot;--radius&quot;</span>,    <span class="bu">type</span><span class="op">=</span><span class="bu">float</span>,          default<span class="op">=</span><span class="fl">1.2</span>,   <span class="bu">help</span><span class="op">=</span><span class="st">&quot;Radius of the component&quot;</span>)</a>
<a class="sourceLine" id="cb1-21" title="21">    arg_parser.add_argument(<span class="st">&quot;-d&quot;</span>,          <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>,            default<span class="op">=</span><span class="dv">9</span>,     <span class="bu">help</span><span class="op">=</span><span class="st">&quot;Distance to the component&quot;</span>)</a>
<a class="sourceLine" id="cb1-22" title="22">    arg_parser.add_argument(<span class="st">&quot;--name&quot;</span>,      <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>,                           <span class="bu">help</span><span class="op">=</span><span class="st">&quot;Name of component&quot;</span>)</a>
<a class="sourceLine" id="cb1-23" title="23">    arg_parser.add_argument(<span class="st">&quot;--mode&quot;</span>,      <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>,            choices<span class="op">=</span>modes, <span class="bu">help</span><span class="op">=</span><span class="st">&quot;Mode to use. Should be either release or debug&quot;</span>)</a>
<a class="sourceLine" id="cb1-24" title="24">    arg_parser.add_argument(<span class="st">&quot;--recompute&quot;</span>, action<span class="op">=</span><span class="st">&quot;store_true&quot;</span>, default<span class="op">=</span><span class="va">False</span>, <span class="bu">help</span><span class="op">=</span><span class="st">&quot;Indicate if recomputation is needed&quot;</span>)</a>
<a class="sourceLine" id="cb1-25" title="25">    arg_parser.add_argument(<span class="st">&quot;--in_files&quot;</span>,  <span class="bu">type</span><span class="op">=</span><span class="bu">str</span>,            nargs<span class="op">=</span><span class="st">&quot;+&quot;</span>,     <span class="bu">help</span><span class="op">=</span><span class="st">&quot;One or more input file paths&quot;</span>)</a>
<a class="sourceLine" id="cb1-26" title="26"></a>
<a class="sourceLine" id="cb1-27" title="27">    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">==</span> <span class="dv">1</span>:</a>
<a class="sourceLine" id="cb1-28" title="28">        arg_parser.print_help()</a>
<a class="sourceLine" id="cb1-29" title="29">        sys.exit(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1-30" title="30"></a>
<a class="sourceLine" id="cb1-31" title="31">    <span class="co"># Parse sys.argv using parser</span></a>
<a class="sourceLine" id="cb1-32" title="32">    args <span class="op">=</span> arg_parser.parse_args()</a>
<a class="sourceLine" id="cb1-33" title="33"></a>
<a class="sourceLine" id="cb1-34" title="34">    <span class="co"># Pass arguments around</span></a>
<a class="sourceLine" id="cb1-35" title="35">    foo(args)</a>
<a class="sourceLine" id="cb1-36" title="36"></a>
<a class="sourceLine" id="cb1-37" title="37"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</a>
<a class="sourceLine" id="cb1-38" title="38">    main()</a></code></pre></div>
<h2 id="argumentparser">ArgumentParser</h2>
<p>This call has many useful options, the only one I actually use is:</p>
<ul>
<li><code>description</code>: Specify what you want to be displayed about this program when it is invoked using <code>--help</code>.</li>
</ul>
<h2 id="add_argument">add_argument</h2>
<p>This call has many useful options. Many of them are needed in most scripts:</p>
<ul>
<li><p>The first input is the option name. If the option is named without a single or double dash, as say <code>radius</code>, then it becomes a positional argument. So, you cannot invoke its option name, but can directly pass its value. For example: <code>./main.py 3.14</code></p></li>
<li><p>An option can be specified with a single <code>-r</code> or double dash <code>--radius</code>. You can access the value of this option later in the argument object using <code>r</code> or <code>radius</code> member respectively.</p></li>
<li><p>An option can be specified with both single and double dashes, just separate both the quoted strings by a comma. Note that you can only access the value later using the name provided to the double dash option <code>radius</code>.</p></li>
<li><p>Input argument to a named option can be separated by a space <code>--radius 13</code> or using the equals symbol <code>--radius=13</code>.</p></li>
<li><p><strong>action</strong> parameter: There are many strings that can be passed to this parameter indicating what to do when the option is invoked. The most typical usage is to set a True or False value for a boolean using <code>store_true</code> or <code>store_false</code> respectively.</p></li>
<li><p><strong>default</strong> parameter: Specify the default value to be set if you do not provide a value for this option at the shell.</p></li>
<li><p><strong>type</strong> parameter: Specify what type the input value should be interpreted as. If you do not specify this, then it will be stored as a string. An error will be thrown if the input you provide cannot be converted to this type.</p></li>
<li><p><strong>required</strong> parameter: Set this to True if providing a value to this parameter is mandatory. An error is thrown at runtime if the value is not provided by user.</p></li>
<li><p><strong>help</strong> parameter: Set the string to shown as documentation when the program is invoked with <code>--help</code>.</p></li>
<li><p><strong>dest</strong> parameter: Specify the member name to be used to store the value passed to this option. By default it has the same name as the option name. If the option name had dashes, they are converted to underscores to create a valid member name.</p></li>
<li><p>When the program is invoked with <code>-h</code> or <code>--help</code>, it will list the input options available and the documentation you have provided for each option.</p></li>
</ul>
<p><strong>Tried with:</strong> Python 3.5 and Ubuntu 16.04</p>
<hr />
<div class="footer">
<a href="mailto:codeyarns@gmail.com" style="text-decoration: none; font-size: xx-large;">üìß</a> <a href="https://twitter.com/codeyarns" class="twitter-follow-button" data-show-count="false" data-size="large">Follow <span class="citation" data-cites="codeyarns">@codeyarns</span></a> <a href="https://www.buymeacoffee.com/codeyarns"><img src="https://cdn.buymeacoffee.com/buttons/default-orange.png" alt="Buy Me A Coffee" style="height: 38px !important;width: 163px !important;" ></a>
</div>
</body>
</html>
