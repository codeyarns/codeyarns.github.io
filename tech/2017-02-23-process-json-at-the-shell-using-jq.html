<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns ‚Äì Process JSON at the shell using jq</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="http://codeyarns.com/tech/rss.xml" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-1956250892185343" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
  </script>
  <!-- Twitter button -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>

<body>

<div class="contentbox">
<div class="header">
    <a href=".." class="header">Code Yarns ‚Äçüë®‚Äçüíª</a>
  </div>
  <div class="header">
    <a class="header2" href="http://codeyarns.com/tech/">Tech Blog</a> ‚ùñ <a class="header2" href="http://codeyarns.com/personal/">Personal Blog</a>
  </div>
  <div class="header" style="padding-top: 10px;">
    <iframe src="https://duckduckgo.com/search.html?site=codeyarns.com&kp=-2&kc=1&prefill=Search this website" style="width:300px;height:40px;" frameborder="0"></iframe>
</div>
</div>

<br />

<div class="contentbox">
<header>
<h1 class="title">Process JSON at the shell using jq</h1>
<p class="date">üìÖ 2017-Feb-23 ‚¨© ‚úçÔ∏è Ashwin Nanjappa ‚¨© üìö <a href="index.html">Archive</a></p>
</header>
<p><a href="https://stedolan.github.io/jq/"><strong>jq</strong></a> is an awesome tool to play with <strong>JSON</strong> data at the commandline. It is akin to the Unix text manipulation tools, but for JSON.</p>
<ul>
<li>Installing it is easy:</li>
</ul>
<pre><code>$ sudo apt install jq</code></pre>
<ul>
<li><strong>Pretty formatting</strong>: To format a JSON file so that it looks pretty:</li>
</ul>
<pre><code>$ cat ugly.json | jq &#39;.&#39;</code></pre>
<p>What this command is doing is piping the JSON file to jq and then asking it to filter everything, but jq formats everything it touches, so we get pretty JSON formatting out from it.</p>
<p>I have found this useful to format huge JSON files. jq is much faster at this job compared to the <strong>json.tool</strong> in Python.</p>
<ul>
<li>You can access and print specific sections of the JSON just like in Python. For example:</li>
</ul>
<pre><code>$ cat foobar.json | jq &#39;.[&quot;records&quot;][6][&quot;name&quot;]&#39;</code></pre>
<p>Note the use of single quotes to encapsulate the expression and use of double quotes inside to specify keys in dictionaries.</p>
<ul>
<li><strong>Convert to CSV</strong>: If you pull out values in a tabular manner, it can be converted to CSV by piping those values to jq's CSV exporter:</li>
</ul>
<pre><code>$ cat foobar.json | jq &#39;.[] | [.name, .time, .percent] | @csv&#39; &gt; foobar.csv</code></pre>
<h2 id="references">References</h2>
<ul>
<li><a href="https://programminghistorian.org/en/lessons/json-and-jq">Reshaping JSON with jq</a></li>
<li><a href="https://dev.to/dannylee8/using-jq-to-convert-json-to-csv-top-level-values-f14">Using JQ to Convert JSON to CSV</a></li>
</ul>
<p><strong>Tried with:</strong> jq 1.5 and Ubuntu 16.04</p>
</div>

<br />

<div class="contentbox">

<div class="footer"><a href="mailto:codeyarns@gmail.com" style="text-decoration: none; font-size: xx-large;">üìß</a> <a href="https://twitter.com/codeyarns" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @codeyarns</a> <a href="https://www.buymeacoffee.com/codeyarns"><img src="https://cdn.buymeacoffee.com/buttons/default-orange.png" alt="Buy Me A Coffee" style="height: 38px !important;width: 163px !important;" ></a></div>
</div>

</body>
</html>
