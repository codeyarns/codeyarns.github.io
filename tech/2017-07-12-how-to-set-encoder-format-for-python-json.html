<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns – How to set encoder format for Python JSON</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.com/tech/rss.xml" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-143311697-1');
  </script>
</head>

<body>

<div class="contentbox">
<div class="header">
    <a href=".." class="header">Code Yarns ‍👨‍💻</a>
  </div>
  <div class="header">
    <a class="header2" href="https://codeyarns.com/tech/">Tech Blog</a> ❖ <a class="header2" href="https://codeyarns.com/personal/">Personal Blog</a>
  </div>
  <div class="header">
      <script async src="https://cse.google.com/cse.js?cx=69d6be64abfa91ed2"> </script>
      <div class="gcse-search"></div>
</div>
</div>

<br />

<div class="contentbox">
<header>
<h1 class="title">How to set encoder format for Python JSON</h1>
<p class="date">📅 2017-Jul-12 ⬩ ✍️ Ashwin Nanjappa ⬩ 🏷️ <a href='index.html#float'>float</a>, <a href='index.html#json'>json</a>, <a href='index.html#python'>python</a> ⬩ 📚 <a href="index.html">Archive</a></p>
</header>
<p>Python’s <strong>JSON</strong> module makes it very easy to dump data into a JSON file. However, I have found that the <strong>float</strong> values are encoded with a lot of decimal places or in scientific notation. There is no elegant method to set the formatting in the float encoder of the JSON module. The best solution seems to be to monkey patch its formatting option:</p>
<pre><code># Make json.dump() encode floats with 5 places of precision
import json
json.encoder.FLOAT_REPR = lambda x: format(x, &#39;.5f&#39;)</code></pre>
<p><strong>Reference:</strong> <a href="https://stackoverflow.com/questions/1447287" class="uri">https://stackoverflow.com/questions/1447287</a></p>
</div>

<br />

<div class="contentbox">

<div style="text-align: center">
© 2024 Ashwin Nanjappa
•
All writing under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a> license
•
<a href="https://mastodon.social/@codeyarns">🐘 Mastodon</a>
•
<a href="mailto:codeyarns@gmail.com">📧 Email</a>
</div>
</div>

</body>
</html>
