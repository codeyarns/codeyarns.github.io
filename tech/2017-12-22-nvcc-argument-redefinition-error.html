<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Ashwin Nanjappa" />
  <title>Code Yarns â€“ NVCC argument redefinition error</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
  <!-- CSS styles -->
  <style>
  p.caption {
      text-align: center;
  }
  img {
      max-width: 90%;
      display: block;
      margin: 0 auto;
  }
  </style>
</head>
<body>
<a href="..">Code Yarns</a> / <a href="index.html">Tech Blog</a>
<hr />
<div id="header">
<h1 class="title">NVCC argument redefinition error</h1>
<h3 class="date">2017-12-22 17:02:55+00:00</h3>
</div>
<h2 id="problem">Problem</h2>
<p>I was trying to build a CUDA project that worked on one computer on a second computer. Though this project built without problems on the first computer, nvcc gave an argument redefinition error on the second computer:</p>
<pre><code>nvcc fatal   : redefinition of argument &#39;std&#39;</code></pre>
<h2 id="solution">Solution</h2>
<p>At first, I thought that the compilation error was arising from the source code. Actually, the error is being reported about a compilation argument to nvcc. It is saying that a std argument has been provided more than once.</p>
<p>This project was using CMake, so the actual compilation commands invoked by make are hidden. I used the VERBOSE trick, described <a href="https://codeyarns.com/2013/10/07/how-to-view-commands-executed-by-make/">here</a>, to view the actual commands issued to the C++ and CUDA compilers. Not surprisingly, I found that the <code>-std=c++11</code> argument was being passed twice. But why?</p>
<p>I checked the CMakeLists.txt file and found that indeed the C++11 argument was being passed to the compiler twice by setting it in both <code>CMAKE_CXX_FLAGS</code> and <code>CUDA_NVCC_FLAGS</code>. How and why was this working fine on the first computer? Turns out that the older CMake used on the first computer would not pass the C++ flag to NVCC, so it had to be specifically redefined for CUDA compiler flags.</p>
<p>The second computer was using a newer version of Ubuntu, with newer version of CMake. This was intelligent enough to pass a C++ flag to the CUDA NVCC compiler too. But since the NVCC flag of the same name also existed, it was causing the argument redefinition error. Removing the flag from the CUDA flags made the problem go away.</p>
<hr />
<p><a href="rss.xml">RSS</a> - <a href="mailto:codeyarns@gmail.com">Contact</a></p>
</body>
</html>
