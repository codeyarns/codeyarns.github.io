<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns â€“ CMake fails looking for CUDA_TOOLKIT_ROOT_DIR</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.github.io/tech/rss.xml" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
</head>
<body>
<table style="width: 100%;">
    <tr>
        <td>
            <a href=".." class="header">Code Yarns &#128187;</a>
        </td>
        <td style="text-align: right;">
            <iframe src="https://duckduckgo.com/search.html?site=codeyarns.github.io&kp=-2&kc=1&prefill=Search this website" style="overflow:hidden;margin:0;padding:0;width:300px;height:40px;" frameborder="0"></iframe>
        </td>
    </tr>
</table>
<hr />
<header>
<h1 class="title">CMake fails looking for CUDA_TOOLKIT_ROOT_DIR</h1>
<p class="date">(First posted on: 2015-03-27 12:46:08+00:00)</p>
</header>
<h2 id="problem">Problem</h2>
<p>You have installed CUDA and try to compile a <strong>CUDA</strong> program using a CMake, which fails with this error:</p>
<pre><code>$ cmake ..
CMake Error at /usr/share/cmake-2.8/Modules/FindCUDA.cmake:548 (message):
  Specify CUDA_TOOLKIT_ROOT_DIR
Call Stack (most recent call first):
  CMakeLists.txt:3 (find_package)</code></pre>
<h2 id="solution-1">Solution 1</h2>
<p><code>FindCUDA.cmake</code> is trying to find your CUDA installation directory and failing. I had installed CUDA 7.0 on this machine, which was in <code>/usr/local/cuda-7.0</code>. However, CMake looks for <code>/usr/local/cuda</code>. The CUDA installer is supposed to create a symbolic link <code>/usr/local/cuda</code> pointing to that actual installation directory.</p>
<p>That symbolic link was not there on this computer. This can sometimes happen when you have two CUDA installations and remove one of them. The one removed takes out the symbolic link with it. I had CUDA 6.5 and CUDA 7.0 on this computer before I removed CUDA 6.5.</p>
<p>Anyway, we now know how to fix this:</p>
<pre><code>$ sudo ln -s /usr/local/cuda-7.0 /usr/local/cuda</code></pre>
<h2 id="solution-2">Solution 2</h2>
<p>Pass the CUDA installation directory to the <code>CUDA_TOOLKIT_ROOT_DIR</code> variable directly during the invocation of CMake:</p>
<pre><code>$ cmake -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-7.0 ..</code></pre>
<p><strong>Tried with:</strong> CUDA 7.0 and Ubuntu 14.04</p>
<hr />
<p><a href="rss.xml">RSS</a> - <a href="mailto:codeyarns@gmail.com">Contact</a></p>
</body>
</html>
