<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns â€“ CMake fails looking for CUDA_TOOLKIT_ROOT_DIR</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.com/tech/rss.xml" />
</head>

<body>

<div class="contentbox">
<div class="header">
    <a href=".." class="header">Code Yarns â€ğŸ‘¨â€ğŸ’»</a>
</div>
<div class="header">
    <a class="header2" href="https://codeyarns.com/tech/">Tech Blog</a> â– <a class="header2" href="https://codeyarns.com/personal/">Personal Blog</a>
</div>
</div>

<br />

<div class="contentbox">
<header>
<h1 class="title">CMake fails looking for CUDA_TOOLKIT_ROOT_DIR</h1>
<p class="date">ğŸ“… 2015-Mar-27 â¬© âœï¸ Ashwin Nanjappa â¬© ğŸ·ï¸ <a href='index.html#cmake'>cmake</a>, <a href='index.html#cuda'>cuda</a>, <a href='index.html#error'>error</a> â¬© ğŸ“š <a href="index.html">Archive</a></p>
</header>
<h2 id="problem">Problem</h2>
<p>You have installed CUDA and try to compile a <strong>CUDA</strong>
program using a CMake, which fails with this error:</p>
<pre><code>$ cmake ..
CMake Error at /usr/share/cmake-2.8/Modules/FindCUDA.cmake:548 (message):
  Specify CUDA_TOOLKIT_ROOT_DIR
Call Stack (most recent call first):
  CMakeLists.txt:3 (find_package)</code></pre>
<h2 id="solution-1">Solution 1</h2>
<p><code>FindCUDA.cmake</code> is trying to find your CUDA installation
directory and failing. I had installed CUDA 7.0 on this machine, which
was in <code>/usr/local/cuda-7.0</code>. However, CMake looks for
<code>/usr/local/cuda</code>. The CUDA installer is supposed to create a
symbolic link <code>/usr/local/cuda</code> pointing to that actual
installation directory.</p>
<p>That symbolic link was not there on this computer. This can sometimes
happen when you have two CUDA installations and remove one of them. The
one removed takes out the symbolic link with it. I had CUDA 6.5 and CUDA
7.0 on this computer before I removed CUDA 6.5.</p>
<p>Anyway, we now know how to fix this:</p>
<pre><code>$ sudo ln -s /usr/local/cuda-7.0 /usr/local/cuda</code></pre>
<h2 id="solution-2">Solution 2</h2>
<p>Pass the CUDA installation directory to the
<code>CUDA_TOOLKIT_ROOT_DIR</code> variable directly during the
invocation of CMake:</p>
<pre><code>$ cmake -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-7.0 ..</code></pre>
<p><strong>Tried with:</strong> CUDA 7.0 and Ubuntu 14.04</p>
</div>

<br />

<div class="contentbox">

<div style="text-align: center">
Â© 2026 Ashwin Nanjappa
â€¢
All writing under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a> license
â€¢
<a href="https://mastodon.social/@codeyarns">ğŸ˜ Mastodon</a>
â€¢
<a href="https://bsky.app/profile/codeyarns.bsky.social">ğŸ¦‹ Bluesky</a>
â€¢
<a href="mailto:codeyarns@gmail.com">ğŸ“§ Email</a>
</div>
</div>

</body>
</html>
