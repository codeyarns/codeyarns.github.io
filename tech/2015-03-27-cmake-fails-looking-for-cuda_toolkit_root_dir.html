<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Ashwin Nanjappa" />
  <title>CMake fails looking for CUDA_TOOLKIT_ROOT_DIR</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
</head>
<body>
<div id="header">
<h1 class="title">CMake fails looking for CUDA_TOOLKIT_ROOT_DIR</h1>
<h2 class="author">Ashwin Nanjappa</h2>
<h3 class="date">2015-03-27 12:46:08+00:00</h3>
</div>
<h1 id="problem">Problem</h1>
<p>You have installed CUDA and try to compile a <strong>CUDA</strong> program using a CMake, which fails with this error:</p>
<pre><code>$ cmake ..
CMake Error at /usr/share/cmake-2.8/Modules/FindCUDA.cmake:548 (message):
  Specify CUDA_TOOLKIT_ROOT_DIR
Call Stack (most recent call first):
  CMakeLists.txt:3 (find_package)</code></pre>
<h1 id="solution-1">Solution 1</h1>
<p><code>FindCUDA.cmake</code> is trying to find your CUDA installation directory and failing. I had installed CUDA 7.0 on this machine, which was in <code>/usr/local/cuda-7.0</code>. However, CMake looks for <code>/usr/local/cuda</code>. The CUDA installer is supposed to create a symbolic link <code>/usr/local/cuda</code> pointing to that actual installation directory.</p>
<p>That symbolic link was not there on this computer. This can sometimes happen when you have two CUDA installations and remove one of them. The one removed takes out the symbolic link with it. I had CUDA 6.5 and CUDA 7.0 on this computer before I removed CUDA 6.5.</p>
<p>Anyway, we now know how to fix this:</p>
<pre><code>$ sudo ln -s /usr/local/cuda-7.0 /usr/local/cuda</code></pre>
<h1 id="solution-2">Solution 2</h1>
<p>Pass the CUDA installation directory to the <code>CUDA_TOOLKIT_ROOT_DIR</code> variable directly during the invocation of CMake:</p>
<pre><code>$ cmake -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-7.0 ..</code></pre>
<p><strong>Tried with:</strong> CUDA 7.0 and Ubuntu 14.04</p>
<hr />
<p><a href="..">Code Yarns</a> / <a href="index.html">Tech Blog</a></p>
</body>
</html>
