<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns ‚Äì Work with remote directories in VSCode using Remote SSH</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.com/tech/rss.xml" />
  <!-- Microsoft Clarity Analytics -->
  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "3wadqgw95m");
  </script>
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-143311697-1');
  </script>
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-1956250892185343" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
  </script>
  <!-- Twitter button -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>

<body>

<div class="contentbox">
<div class="header">
    <a href=".." class="header">Code Yarns ‚Äçüë®‚Äçüíª</a>
  </div>
  <div class="header">
    <a class="header2" href="https://codeyarns.com/tech/">Tech Blog</a> ‚ùñ <a class="header2" href="https://codeyarns.com/personal/">Personal Blog</a>
  </div>
  <div class="header">
      <script async src="https://cse.google.com/cse.js?cx=69d6be64abfa91ed2"> </script>
      <div class="gcse-search"></div>
</div>
</div>

<br />

<div class="contentbox">
<header>
<h1 class="title">Work with remote directories in VSCode using Remote SSH</h1>
<p class="date">üìÖ 2020-Jul-14 ‚¨© ‚úçÔ∏è Ashwin Nanjappa ‚¨© üè∑Ô∏è <a href='index.html#ssh'>ssh</a>, <a href='index.html#vscode'>vscode</a> ‚¨© üìö <a href="index.html">Archive</a></p>
</header>
<p>The <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh"><strong>Remote - SSH</strong></a> extension makes opening and working with remote directories just as natural and fully-featured in <strong>Visual Studio Code</strong> as working with local directories. Once you set it up and have a remote directory open, you can browse the directory tree, open any files, find-replace and lookup definitions across all the files.</p>
<p>This is in contrast to the <a href="2018-05-03-how-to-edit-remote-files-using-remote-vscode.html"><strong>Remote VSCode</strong></a> extension which made it easy to open individual files residing on a remote computer using SSH, but was not ideal for larger-scale work like working on a project or directory of files.</p>
<h2 id="usage">Usage</h2>
<p>To use this:</p>
<ul>
<li>Search for the <strong>Remote - SSH</strong> extension in VSCode and install it.</li>
<li>Open <strong>Remote Explorer</strong> on the left and choose <strong>SSH Targets</strong> from the top dropdown. (If you are also using WSL, you might see <strong>WSL Targets</strong> listed there, but that is <em>not</em> what we want.)</li>
<li>Click the <code>+</code> to add a new remote directory by providing the <code>ssh joe@remote123</code> command and then the path on the remote computer. VSCode will prompt you for the password on the remote computer.</li>
<li>You should now be able to do everything you could do locally in VSCode on this remote directory. Even code completion and code exploration across the files in the directory worked fine in Python and C++ code for me.</li>
<li>If you open multiple remote directories, you can switch between them in the Remote Explorer or in the File -&gt; Open Recent section.</li>
</ul>
<h2 id="use-without-password">Use without password</h2>
<p>You will notice that VSCode asks for the remote password every time you open the remote directory or reopen VSCode. To avoid this, we need to understand how VSCode uses ssh and then provide the ssh client with an identity file as follows:</p>
<ul>
<li>The Remote - SSH extension uses the OpenSSH Windows client located at <code>C:\Windows\System32\OpenSSH\ssh.exe</code> for its SSH operations.</li>
<li>It stores its remote computer (not remote directory) configuration in the <code>%USERPROFILE%/.ssh/config</code> file.</li>
<li>By default, when you added a single remote computer, it would have these lines:</li>
</ul>
<pre><code>Host 10.110.22.22
  HostName 10.110.22.22
  User joe</code></pre>
<ul>
<li>To avoid entering password every time, we need to create a public-private key pair locally and share the key with the remote computer, as described <a href="2016-01-20-how-to-ssh-without-username-or-password.html">here</a>. I used the ssh inside WSL to create the public-private key pair and then shared the <code>.pub</code> key with the remote computer.</li>
<li>To make the VSCode‚Äôs SSH client use these <strong>identity files</strong>, we copy over the private and public key files (for example <code>id_ed25519</code> and <code>id_ed25519.pub</code>) generated by the above step to the <code>%USERPROFILE%\.ssh</code> directory. (Actually, the public key file is not really needed, since we have already shared it to the remote computer in the earlier step.)</li>
<li>Specify the private key file that should be used with the remote computer in the <code>%USERPROFILE%\.ssh\config</code> file:</li>
</ul>
<pre><code>Host 10.110.22.22
  HostName 10.110.22.22
  User joe
  IdentityFile ~\.ssh\id_ed25519</code></pre>
<p>Note how the OpenSSH Windows client can understand the Unix <code>~</code> to map to <code>%USERPROFILE</code>, but needs Windows forward slashes (not the Unix back slashes) in the path.</p>
<p>After this setup, you should be able to connect to the remote host and open directories on it just like they were on the local computer.</p>
<p><strong>Tried with:</strong> Visual Studio Code 1.47 and Windows 10</p>
</div>

<br />

<div class="contentbox">

<div style="text-align: center">
¬© 2022 Ashwin Nanjappa
‚Ä¢
All writing under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a> license
‚Ä¢
<a href="https://hachyderm.io/@codeyarns">üêò @codeyarns@hachyderm.io</a>
‚Ä¢
<a href="mailto:codeyarns@gmail.com" style="text-decoration: none; font-size: x-large;">üìß</a>
</div>
</div>

</body>
</html>
