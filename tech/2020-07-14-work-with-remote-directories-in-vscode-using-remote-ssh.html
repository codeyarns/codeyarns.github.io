<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns ‚Äì Work with remote directories in VSCode using Remote SSH</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../styles.css">
  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" href="https://codeyarns.github.io/tech/rss.xml" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-1956250892185343" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
  </script>
  <!-- Twitter button -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>

<body>

<div class="contentbox">
<table style="width: 100%;">
    <tr>
        <td style="text-align: left;">
            <a href=".." class="header">Code Yarns ‚Äçüë®‚Äçüíª</a>
        </td>
        <td style="text-align: right;">
            <div class="header2"><a class="header2" href="https://codeyarns.github.io/tech/">Tech Blog</a> ‚ùñ <a class="header2" href="https://codeyarns.github.io/personal/">Personal Blog</a></div>
            </br>
            <iframe src="https://duckduckgo.com/search.html?site=codeyarns.github.io&kp=-2&kc=1&prefill=Search this website" style="overflow:hidden;margin:0;padding:0;width:300px;height:40px;" frameborder="0"></iframe>
        </td>
    </tr>
</table>
</div>

<br />

<div class="contentbox">
<header>
<h1 class="title">Work with remote directories in VSCode using Remote SSH</h1>
<p class="date">üìÖ 2020-Jul-14 ‚¨© üìö <a href="index.html">Archive</a></p>
</header>
<p>The <a href="2018-05-03-how-to-edit-remote-files-using-remote-vscode.html"><strong>Remote VSCode</strong></a> extension made it easy to open individual files residing on a remote computer using SSH in VSCode. However, opening invidividual files like this is not an ideal workflow when working on a project or directory of files.</p>
<p>The <strong>Remote - SSH</strong> extension makes opening and working with remote directories just as natural and fully-featured in <strong>Visual Studio Code</strong> as working with local directories. Once you set it up and have a remote directory open, you can browse the directory tree, open any files, find-replace and lookup definitions across all the files.</p>
<p>To use this:</p>
<ul>
<li>Search for the <strong>Remote - SSH</strong> extension in VSCode and install it.</li>
<li>Open <strong>Remote Explorer</strong> on the left and choose <strong>SSH Targets</strong> from the top dropdown. (If you are also using WSL, you might see <strong>WSL Targets</strong> listed there, but that is not what we want.)</li>
<li>Click the + to add a new remote directory by providing the <code>ssh joe@remote123</code> command and then the path on the remote computer. VSCode will prompt you for the password on the remote computer.</li>
<li>You should now be able to do everything you could do locally on this remote directory.</li>
<li>If you open multiple remote directories, you can switch between them in the Remote Explorer or in the File -&gt; Open Recent section.</li>
</ul>
<p>To stop using password:</p>
<p>You will notice that VSCode asks for the remote password every time you open the remote directory or reopen VSCode. To avoid this, we need to understand how VSCode uses ssh and then provide the ssh client with an identity file as follows:</p>
<ul>
<li>The Remote - SSH extension uses the OpenSSH Windows client located at <code>C:\Windows\System32\OpenSSH\ssh.exe</code> for its SSH operations.</li>
<li>It stores its remote computer (not remote directory) configuration in the <code>%USERPROFILE%/.ssh/config</code> file.</li>
<li><p>By default, when you added a single remote computer, it would have these lines:</p>
<pre><code>Host 10.110.22.22
  HostName 10.110.22.22
  User joe</code></pre></li>
<li>To avoid entering password everytime, we need to create a public-private key pair locally and share the key with the remote computer, as described <a href="2016-01-20-how-to-ssh-without-username-or-password.html">here</a>. I used the ssh inside WSL for this.</li>
<li>To make the VSCode's SSH client use these <strong>identity files</strong>, we copy over the <code>id_rsa</code> and <code>id_rsa.pub</code> generated by the above step to the <code>%USERPROFILE%\.ssh</code> directory. (The <code>id_rsa.pub</code> is not really needed, since we have already shared it to the remote computer in the earlier step.)</li>
<li>By default, the SSH client looks for an identity file named <code>id_rsa</code> in the above directory, so now you should be able to open remote directory at will without entering the password.</li>
<li><p>To make this explicit (in case you want to use a different path or filename), you can add an <code>IdentityFile</code> line to the SSH config file like this:</p>
<pre><code>Host 10.110.22.22
  HostName 10.110.22.22
  User joe
  IdentityFile ~\.ssh\id_rsa</code></pre>
<p>Note how the OpenSSH Windows client can understand <code>~</code> to mean <code>%USERPROFILE</code>, but needs Windows forward slashes in the path.</p></li>
</ul>
<p><strong>Tried with:</strong> Visual Studio Code 1.47 and Windows 10</p>
</div>

<br />

<div class="contentbox">

<div class="footer"><a href="mailto:codeyarns@gmail.com" style="text-decoration: none; font-size: xx-large;">üìß</a> <a href="https://twitter.com/codeyarns" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @codeyarns</a> <a href="https://www.buymeacoffee.com/codeyarns"><img src="https://cdn.buymeacoffee.com/buttons/default-orange.png" alt="Buy Me A Coffee" style="height: 38px !important;width: 163px !important;" ></a></div>
</div>

</body>
</html>
