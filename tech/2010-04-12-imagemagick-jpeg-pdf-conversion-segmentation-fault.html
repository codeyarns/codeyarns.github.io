<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Ashwin Nanjappa">
  <title>Code Yarns â€“ ImageMagick: JPEG-PDF Conversion Segmentation Fault</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="../styles.css">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143311697-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-143311697-1');
  </script>
</head>
<body>
<a href="..">Code Yarns</a> / <a href="index.html">Tech Blog</a> / Search my site <script async src="https://cse.google.com/cse.js?cx=003521915278168649297:cryrlg7hahe"></script>
<div class="gcse-search"></div>
<hr />
<header>
<h1 class="title">ImageMagick: JPEG-PDF Conversion Segmentation Fault</h1>
<p class="date">2010-04-12 13:33:32+00:00</p>
</header>
<p>As I have <a href="http://codeyarns.wordpress.com/2009/12/29/imagemagick-convert-images-to-pdf-document/">blogged earlier</a>, I use the <a href="http://www.imagemagick.org/"><strong>ImageMagick</strong></a> <strong><a href="http://www.imagemagick.org/script/convert.php">convert</a></strong> program to convert my JPG scans to PDF files. This command which works fine on Windows ends up in a segmentation fault on Ubuntu:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">convert</span> scans-*.jpeg fooBar.pdf
<span class="ex">Segmentation</span> fault</code></pre></div>
<p>There is a <a href="http://homepage.uibk.ac.at/~c705283/archives/2010/03/19/ubuntu_karmic_imagemagick_convert_jpg_to_pdf_segmentation_fault/index.html">workaround</a> for this error by using a <strong>compression method</strong> that is different (JPEG) from the default method (Zip). But, the real longterm solution seems to be a switch to <a href="http://www.graphicsmagick.org/"><strong>GraphicsMagick</strong></a>.</p>
<p><a href="http://codeyarns.files.wordpress.com/2010/04/2010_04_12_graphicsmagick_logo.png"><img src="http://codeyarns.files.wordpress.com/2010/04/2010_04_12_graphicsmagick_logo.png" /></a></p>
<p>What is this GraphicsMagick you say? It is a fork of the ImageMagick code aimed at efficiency, performance and stability. It pains me to see projects in the opensource world forking like this even today. GraphicsMagick is available on Ubuntu repositories and can be installed using the Synaptic Package Manager by looking for the <strong>graphicsmagick</strong> package. Using GraphicsMagick for the JPEG-PDF conversion worked fine without any errors. GraphicsMagick commands and parameters are the same as ImageMagick, except with a prefix of <strong>gm</strong>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">gm</span> convert scans-*.jpeg fooBar.pdf</code></pre></div>
<hr />
<p><a href="rss.xml">RSS</a> - <a href="mailto:codeyarns@gmail.com">Contact</a></p>
</body>
</html>
